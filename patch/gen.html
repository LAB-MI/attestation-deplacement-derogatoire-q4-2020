<!DOCTYPE html>

<html>

	<head>

		<title>covid_rapide</title>

		<link rel="icon" type="image/png" href="icon.png" />
	
		<meta http-equiv="Cache-Control" content="no-store" />
		<meta http-equiv="content-type" content="text/html; charset=UTF-8">
		<meta name="viewport" content="initial-scale=1, user-scalable=no, maximum-scale=1, width=device-width, height=device-height">

		<style>

			html, body {
				height: 100%;
				margin: 0;
			}

			form {
				display: flex;
				flex-direction: column;
				justify-content: space-around;
				align-items: center;
				margin: 0 auto;
				width: 450px;
				max-width: 90%;
				height: 100%;
				max-height: 600px;
			}

			input, select {
				display: block;
				box-sizing: border-box;
				margin: 0 auto;
				width: 100%;
				font-size: 1.15em;
			}

		</style>

		<script>

			window.addEventListener("load", async () => {

				let form = document.createElement("form");
				form.action = "../";
				form.method = "get";
				document.body.appendChild(form);

				[
					{name: "lastname", prompt: "NOM"}, {name: "firstname", prompt: "PRENOM"}, 
					{name: "birthday", prompt: "DATE DE NAISSANCE"}, {name: "placeofbirth", prompt: "VILLE DE NAISSANCE"}, 
					{name: "address", prompt: "ADRESSE"}, {name: "zipcode", prompt: "CODE POSTAL"}, {name: "city", prompt: "VILLE"}, 
					{name: "motif", prompt: "MOTIF"}, {name: "minutes", prompt: "ANTIDATAGE"}
				]
				.forEach(field => {

					switch(field.name) {

						case "motif": case "minutes":
							let select = document.createElement("select");
							select.setAttribute("name", field.name);
							select.setAttribute("required", "required");
							form.appendChild(select);

							let prompt = document.createElement("option");
							prompt.setAttribute("disabled", "disabled");
							prompt.setAttribute("selected", "selected");
							prompt.setAttribute("hidden", "hidden");
							prompt.value = "";
							prompt.text = field.prompt;
							select.appendChild(prompt);

							let options = field.name === "motif" ?
							["travail", "achats", "sante", "famille", "handicap", "sport_animaux", "convocation", "missions", "enfants"]
							: [1, 2, 5, 10, 20, 30, 45, 60, 90, 120, 180]
							
							options.forEach(motif => {

								let option = document.createElement("option");
								option.value = option.text = motif;
								select.appendChild(option);

							});
							break;

						default:
							let input = document.createElement("input");
							input.setAttribute("name", field.name);
							input.setAttribute("required", "required");
							input.setAttribute("placeholder", field.prompt);
							form.appendChild(input);
							break;

					}
					
				});

				let submit = document.createElement("input");
				submit.setAttribute("type", "submit");
				submit.value = "OK";
				form.appendChild(submit);

			});

		</script>
		
	</head>

	<body>
		
	</body>

</html>